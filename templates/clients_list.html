{% extends 'layout.html' %}
{% block content %}
  <div class="card">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
      <h2 style="margin:0;">Clientes</h2>
      <a class="btn btn-primary" href="{{ url_for('new_client') }}">+ Nuevo cliente</a>
    </div>

    <form method="get" action="{{ url_for('clients') }}" style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
      <input name="q" value="{{ q }}" placeholder="Buscar por nombre, DNI o teléfono" />
      <button class="btn btn-secondary" type="submit">Buscar</button>
    </form>

    <div style="margin-top:14px; overflow:auto;">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>DNI</th>
            <th>Teléfono</th>
            <th>Operador</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for c in clients %}
            <tr>
              <td>{{ c.id }}</td>
              <td>{{ c.full_name }}</td>
              <td>{{ c.dni }}</td>
              <td>{{ c.phone }}</td>
              <td>{{ c.current_operator }}</td>
              <td>
                <a class="btn btn-secondary" href="{{ url_for('view_client', client_id=c.id) }}">Abrir</a>
              </td>
            </tr>
          {% endfor %}
          {% if not clients %}
            <tr><td colspan="6" style="opacity:.7;">Sin resultados</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
